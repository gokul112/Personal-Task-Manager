{"ast":null,"code":"import _regeneratorRuntime from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/graj/projects/Personal-Task-Manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"../styles/Card.css\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Draggable}from\"react-beautiful-dnd\";import CardEditor from\"./CardEditor\";import CardView from\"./CardView\";var Card=/*#__PURE__*/function(_Component){_inherits(Card,_Component);var _super=_createSuper(Card);function Card(){var _this;_classCallCheck(this,Card);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={hover:false,editing:false,show:false};_this.startHover=function(){return _this.setState({hover:true});};_this.endHover=function(){return _this.setState({hover:false});};_this.startEditing=function(){return _this.setState({hover:false,editing:true,text:_this.props.card.text});};_this.endEditing=function(){return _this.setState({hover:false,editing:false});};_this.editCard=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(text){var _this$props,card,dispatch;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,card=_this$props.card,dispatch=_this$props.dispatch;_this.endEditing();dispatch({type:\"CHANGE_CARD_TEXT\",payload:{cardId:card.id,cardText:text}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteCard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$props2,listId,card,dispatch;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props2=_this.props,listId=_this$props2.listId,card=_this$props2.card,dispatch=_this$props2.dispatch;dispatch({type:\"DELETE_CARD\",payload:{cardId:card.id,listId:listId}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.onOpen=function(){return _this.setState({show:true});};_this.onClose=function(e){e.stopPropagation();_this.setState({show:false});};return _this;}_createClass(Card,[{key:\"render\",value:function render(){var _this2=this;var _this$props3=this.props,card=_this$props3.card,index=_this$props3.index,listId=_this$props3.listId;var _this$state=this.state,hover=_this$state.hover,editing=_this$state.editing,show=_this$state.show;if(!editing){return/*#__PURE__*/React.createElement(Draggable,{draggableId:card.id,index:index},function(provided,snapshot){return/*#__PURE__*/React.createElement(\"div\",Object.assign({ref:provided.innerRef},provided.draggableProps,provided.dragHandleProps,{className:\"Card\",onMouseEnter:_this2.startHover,onMouseLeave:_this2.endHover}),hover&&/*#__PURE__*/React.createElement(\"div\",{className:\"Card-Icons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"Card-Icon\",onClick:_this2.startEditing},/*#__PURE__*/React.createElement(\"ion-icon\",{name:\"create\"}))),/*#__PURE__*/React.createElement(\"div\",{onClick:_this2.onOpen},\" \",card.text),show&&/*#__PURE__*/React.createElement(CardView,{item:card,onClose:_this2.onClose,show:show,listId:listId,deleteCard:_this2.deleteCard}));});}else{return/*#__PURE__*/React.createElement(CardEditor,{text:card.text,onSave:this.editCard,onDelete:this.deleteCard,onCancel:this.endEditing});}}}]);return Card;}(Component);var mapStateToProps=function mapStateToProps(state,ownProps){return{card:state.cardsById[ownProps.cardId]};};export default connect(mapStateToProps)(Card);","map":{"version":3,"sources":["/Users/graj/projects/Personal-Task-Manager/src/components/Card.js"],"names":["React","Component","connect","Draggable","CardEditor","CardView","Card","state","hover","editing","show","startHover","setState","endHover","startEditing","text","props","card","endEditing","editCard","dispatch","type","payload","cardId","id","cardText","deleteCard","listId","onOpen","onClose","e","stopPropagation","index","provided","snapshot","innerRef","draggableProps","dragHandleProps","mapStateToProps","ownProps","cardsById"],"mappings":"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","sourcesContent":["import \"../styles/Card.css\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport CardEditor from \"./CardEditor\";\nimport CardView from \"./CardView\";\n\nclass Card extends Component {\n\n  state = {\n    hover: false,\n    editing: false,\n    show: false\n  };\n  \n  //when hover edit button will be shown via hover boolen value\n  startHover = () => this.setState({ hover: true });\n  endHover = () => this.setState({ hover: false });\n\n  //While editing setting the boolean values to show correctly\n  startEditing = () =>\n    this.setState({\n      hover: false,\n      editing: true,\n      text: this.props.card.text\n    });\n  \n  //After editing updating the state values to identify it is not in editing state.\n  endEditing = () => this.setState({ hover: false, editing: false });\n  \n  //Edit the card text by calling dispatcher method by sending the cardid and text\n  editCard = async text => {\n    const { card, dispatch } = this.props;\n  \n    this.endEditing();\n  \n    dispatch({\n      type: \"CHANGE_CARD_TEXT\",\n      payload: { cardId: card.id, cardText: text }\n    });\n  };\n  \n  //Delete card by calling dispatcher method using id\n  deleteCard = async () => {\n    const { listId, card, dispatch } = this.props;\n  \n    dispatch({\n      type: \"DELETE_CARD\",\n      payload: { cardId: card.id, listId }\n    });\n  };\n\n  //Opens the modal and Updated the show value to identify the modal state. It shows the card description and comments can be added\n  onOpen = () => this.setState({show:true});\n\n  //Updating state value when modal is closed .\n  onClose = (e) =>{\n    e.stopPropagation();\n    this.setState({show:false});\n  }\n  \n\n  render() {\n      const { card, index, listId} = this.props;\n      const { hover, editing, show } = this.state;\n\n      if (!editing) {\n        return (\n          <Draggable draggableId={card.id} index={index}>\n          {(provided, snapshot) => (\n            <div\n              ref={provided.innerRef}\n              {...provided.draggableProps}\n              {...provided.dragHandleProps}\n              className=\"Card\"\n              onMouseEnter={this.startHover}\n              onMouseLeave={this.endHover}\n            >\n              {hover && (\n                <div className=\"Card-Icons\">\n                  <div className=\"Card-Icon\" onClick={this.startEditing}>\n                    <ion-icon name=\"create\" />\n                  </div>\n                </div>\n              )}\n            \n              <div onClick={this.onOpen}> {card.text}</div>\n\n              {show && (<CardView\n                    item={card}\n                    onClose={this.onClose}\n                    show={show}\n                    listId={listId}\n                    deleteCard={this.deleteCard}\n                />)}\n            </div>\n              \n          )}\n      \n        </Draggable>\n          \n        );\n      } else {\n        return (\n          <CardEditor\n            text={card.text}\n            onSave={this.editCard}\n            onDelete={this.deleteCard}\n            onCancel={this.endEditing}\n          />\n        );\n      }\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  card: state.cardsById[ownProps.cardId]\n});\n\nexport default connect(mapStateToProps)(Card);"]},"metadata":{},"sourceType":"module"}